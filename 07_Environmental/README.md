# 07_Environmental — `rhasher`

A tiny REPL that computes hashes using **LibRHash**. Supports at least `MD5`, `SHA1`, and `TTH`.

**Rules (per assignment):**
- First word: hash algorithm name (`MD5`, `SHA1`, `TTH`, …).
- Second word: either **filename** (no quotes) or **string literal** starting with `"` (no spaces assumed).
- If the algorithm name starts with an **uppercase** letter → print **hex** (uppercase).
- If it starts with a **lowercase** letter → print **Base64**.
- Errors are printed to `stderr`. Ctrl+D ends input.

`readline` can be enabled/disabled at compile time via a `#define` produced by `configure` or overridden manually.

## Build (Autotools)

Install dev packages:

- Debian/Ubuntu: `sudo apt-get install -y autoconf automake libtool pkg-config librhash-dev libreadline-dev`
- Fedora/RHEL: `sudo dnf install -y autoconf automake libtool pkgconf-pkg-config rhash-devel readline-devel`
- Arch: `sudo pacman -S autoconf automake libtool pkgconf rhash readline`

Then build and test:

```bash
./autogen.sh
./configure            # detects librhash (required) and readline (optional)
make -j
make check             # runs tests comparing with sha1sum/md5sum
./src/rhasher          # run REPL
```

### Force build **without** readline even if it is installed
```bash
./configure --without-readline
make -j && make check
```

### Force-enable readline via macro (if headers/libs exist)
```bash
CFLAGS="-DUSE_READLINE=1" ./configure
make -j && make check
```

## Usage examples

```
$ ./src/rhasher
rhash> SHA1 tests/data/hello.txt
AAF4C61DDCC5E8A2DABEDE0F3B482CD9AEA9434D
rhash> md5 "hello"
XUFAKrxLKna5cZ2REBfFkg==
rhash> TTH tests/data/hello.txt
DQXG5K4J5X6HUFN6WQKS2Z7R46RQLMZQEXF7YXA   # (Base32 by default for TTH if lower-case; this REPL uses Base64 for lower-case per assignment)
```

## Clean

```bash
make clean            # objects
make distclean        # also removes files generated by configure
make maintainer-clean # everything autotools generated (may remove configure)
```

## Notes
- We use `pkg-config` module **librhash** to discover headers/libs. See LibRHash docs for API and flags like `RHPR_BASE64` and `RHPR_HEX`.
